<div class="container">
    <!--カレンダー追加-->
    <!--<#%= month_calendar do |date| %>-->
    <!--  <#%= date.day %>-->
    <!--<#% end %>-->

    <h1>映画検索</h1>
    <div>
        <%= form_tag(search_tmdb_movies_path, method: :get) do %>
          <%= search_field_tag :looking_for, nil, placeholder: 'Movie Title...' %>
          <%= submit_tag '検索' %>
        <% end %>
    </div>

    <%if params[:looking_for].present? %>
    <!-- 検索された時にコンテンツを表示する-->
        <% movieinfo = JSON.parse((Tmdb::Search.movie(params[:looking_for])).to_json) %>
        <h2><%= params[:looking_for] %>の検索結果</h2>
    <% else %>
     <!--検索されていない時にトレンドコンテンツを表示する-->
        <h2>本日の世界のトレンド</h2>
        <% movieinfo = JSON.parse((Tmdb::Movie.popular).to_json) %>
    <% end%>
    <div class="card-deck">
        <% movieinfo['table']['results'].each do |info| %>
            <div class="card" style='width:25%; flex: none; margin-bottom: 10px;'>
                <p><%= image_tag 'https://image.tmdb.org/t/p/w1280' + info['table']['poster_path'], :width =>"100%", :height =>"100%" %></p>
                <div class="card-body">
                    <h3><%= link_to info['table']['title'], detail_movies_path(id: info['table']['id']), {class: "card-title"} %></h3>
                </div>
            </div>
        <% end %>
    </div>
</div>